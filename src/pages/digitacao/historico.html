<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <title>praticAmente</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.css" integrity="sha512-kJlvECunwXftkPwyvHbclArO8wszgBGisiLeuDFwNM8ws+wKIw0sv1os3ClWZOcrEB2eRXULYUsm8OVRGJKwGA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        .title {
            text-align: center;
            margin: 5% 0%;
        }
        .stts {
            display: flex;
            align-items: end;
            flex-direction: column;
        }
    </style>
</head>
<body>

    <header id="headerMenu"></header>
    
    <h1 class="title">Recorde Geral</h1>

    <section class="content-list">
        <div class="list-item">
            <h3>Carregando...</h3>
            <div class="stts">
                <span>Pontos:</span>
                <span>Nivel:</span>
            </div>
        </div>
    </section>

<script type="module" src="/script.js"></script>
<script src="/js/header-menu.js"></script>


<script type="module">
    // âœ… ImportaÃ§Ãµes
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getFirestore, collection, doc, getDoc, setDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-analytics.js";

    // ðŸ” ConfiguraÃ§Ã£o
    const firebaseConfig = {
        apiKey: "AIzaSyBqrtUfo7aAfySvWPQ8nLqRdH1Dt-yjDlY",
        authDomain: "game-digitacao-4285e.firebaseapp.com",
        projectId: "game-digitacao-4285e",
        storageBucket: "game-digitacao-4285e.appspot.com",
        messagingSenderId: "569609192666",
        appId: "1:569609192666:web:84393a4b4ae0dfea3191e3",
        measurementId: "G-QBGVE2H3J8"
    };

    // ðŸš€ Inicializa Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const analytics = getAnalytics(app);

    // ðŸŒ DisponÃ­vel globalmente
    window.firebaseApp = app;
    window.firebaseDb = db;
    window.firebaseTools = {
        collection,
        doc,
        getDoc,
        setDoc,
        getDocs
    };


async function listarJogadores() {
    const db = window.firebaseDb;
    const { collection, getDocs } = window.firebaseTools;

    const jogadoresCol = collection(db, "jogadores");
    const snapshot = await getDocs(jogadoresCol);

    const lista = [];

    snapshot.forEach(doc => {
        const data = doc.data();
        lista.push({
            nome: data.nome || "Sem nome",
            level: data.level || 0,
            score: data.score || 0
        });
    });

    // Ordenar do maior para o menor por nÃ­vel
    const ordenada = lista.sort((a, b) => b.level - a.level);

    // Selecionar o container da lista
    const container = document.querySelector(".content-list");
    container.innerHTML = ""; // Limpa antes de exibir

    // Criar elementos HTML para cada jogador
    ordenada.forEach(jogador => {
        const div = document.createElement("div");
        div.classList.add("list-item");

        div.innerHTML = `
            <h3>${jogador.nome}</h3>
            <div class="stts">
                <span>NÃ­vel: ${jogador.level}</span>
                <span>Pontos: ${jogador.score}</span><br>
            </div>
        `;

        container.appendChild(div);
    });
}
listarJogadores()

</script>
</body>
</html>